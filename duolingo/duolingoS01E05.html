<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DUOLINGO Chinese Vocabulary Builder - E01S05</title>
    <link
      href="https://fonts.googleapis.com/css2?family=ZCOOL+XiaoWei&family=Ma+Shan+Zheng&display=swap"
      rel="stylesheet"
    />
    <style>
      /* Fuente 1: China redondeada */
      .rounded1 {
        font-family: "ZCOOL XiaoWei", sans-serif !important;
      }

      /* Fuente 2: Estilo pincel elegante */
      .rounded2 {
        font-family: "Ma Shan Zheng", cursive !important;
      }
    </style>
    <style>
      body {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        gap: 10px;
      }

      .word_or_phrase {
        display: flex;
        flex-direction: column;
        text-align: center;
        margin-bottom: 20px;
        border: 1px solid #ccc;
        padding: 10px;
        border-radius: 10px;
        background-color: rgb(216, 255, 216);
      }

      .Q_and_A {
        display: flex;
        flex-direction: column;
        text-align: center;
        margin-bottom: 20px;
        border: 1px solid #ccc;
        padding: 10px;
        border-radius: 10px;
        background-color: rgb(216, 255, 216);
      }

      .Q_and_A hr {
        width: 80%;
        border: 1px solid #ccc !important;
        margin: 10px auto;
        display: block;
      }

      .Q_and_A {
        position: relative;
      }

      /* BotÃ³n de altavoz */
      .speakDialog {
        position: absolute;
        left: 10px; /* margen desde la izquierda */
        top: 50%; /* centrado vertical */
        transform: translateY(-50%);
        background: none !important;
        border: none !important;
        font-size: 40px;
        cursor: pointer;
        padding: 0;
      }

      .pinyin {
        display: block;
        font-size: 16px;
        margin-bottom: 0px;
        color: red;
        word-spacing: 10px;
        letter-spacing: 2px;
        text-indent: 0px;
        white-space: pre;
        text-align-last: justify;
      }

      .chino {
        display: block;
        font-size: 50px;
        font-weight: 500;
        margin-bottom: 5px;
      }

      .trad {
        display: block;
        font-size: 18px;
        margin-top: 6px;
        color: blue;
      }
      .tools {
        display: flex; /* o inline si prefieres */
        gap: 6px;
      }
      .tool a {
        font-size: 40px;
        margin-bottom: 10px;
        text-decoration: none;
      }
    </style>
  </head>
  <body>
    <script
      src="//mandarinspot.com/static/mandarinspot.min.js"
      charset="UTF-8"
    ></script>

    <h1 style="flex-basis: 100%; width: 100%">
      <i>E01S05 Duolingo. Usa pronombres posesivos.</i>
    </h1>

    <div class="word_or_phrase">
      <div class="tools">
        <span class="tool"
          ><a
            target="_blank"
            href="https://translate.google.com/?hl=es&sl=zh-CN&tl=es&op=translate"
            >ğŸŒ</a
          ></span
        >
        <span class="tool"
          ><a target="_blank" href="https://www.drawchinese.com/">ğŸ¨</a></span
        >
        <span class="tool"
          ><a target="_blank" href="https://soundoftext.com/">ğŸ—£ï¸</a></span
        >
        <span class="tool"
          ><a target="_blank" href="https://hanziwriter.org/">ğŸ–Šï¸</a></span
        >
        <span class="tool"
          ><a target="_blank" href="https://turboscribe.ai/">âœï¸</a></span
        >
        <span class="tool"
          ><a
            target=""
            id="sinsun"
            href=""
            style="filter: hue-rotate(100deg) saturate(5); padding: 10px"
            >æ¼¢</a
          ></span
        >
        <span class="tool"
          ><a
            target="_blank"
            href="https://docs.google.com/spreadsheets/d/19zESh9oc7lhX0oTPsWL5n3MyUqREUkJS7-KI8JGRf1w/edit?usp=sharing"
            >ğŸ“…</a
          ></span
        >
      </div>
      <div class="tools">
        <span class="tool"
          ><a
            target="_blank"
            href="https://www.duolingo.com/lesson"
            style="filter: hue-rotate(100deg) saturate(5)"
            >ğŸ¦‰</a
          ></span
        >
        <span class="tool"
          ><a target="_blank" href="https://duome.eu/tips/en/zs">ğŸ¦‰</a></span
        >
        <span class="tool"
          ><a
            target="_blank"
            href="https://www.archchinese.com/chinese_english_dictionary.html"
            >ğŸ“˜</a
          ></span
        >
        <span class="tool"
          ><a
            target="_blank"
            href="https://www.archchinese.com/chinese_english_dictionary.html"
            >ğŸ“•</a
          ></span
        >
        <span class="tool"
          ><a target="_blank" href="https://www.pinyinput.com/?lang=en"
            >âŒ¨ï¸</a
          ></span
        >
        <span class="tool"
          ><button
            id="spotOnOff"
            style="
              font-size: 40px;
              background: none;
              border: none;
              cursor: pointer;
            "
          >
            ğŸª‚
          </button></span
        >
        <span class="tool" title="recargar pÃ¡gina"
          ><button
            id="reload"
            style="
              font-size: 40px;
              background: none;
              border: none;
              cursor: pointer;
            "
          >
            ğŸŒ€
          </button></span
        >
      </div>
      <!-- <span class="tool">ğŸŒ´ğŸ•µğŸ»â€â™€ï¸ğŸ†ğŸ˜¿ğŸ—ºğŸ‰ğŸŒğŸ”ğŸ‘</span> -->
    </div>

    <!--VOCABULARIO: WORDS & PHRASES-->
<div class="word_or_phrase"><span class="pinyin"> zhÃ¨ shÃ¬ </span><span class="chino">è¿™æ˜¯</span><span class="trad">esto es</span></div>
<div class="word_or_phrase"><span class="pinyin"> Ã©r zi </span><span class="chino">å„¿å­</span><span class="trad">hijo</span></div>
<div class="word_or_phrase"><span class="pinyin"> wÇ’ de bÃ  ba </span><span class="chino">æˆ‘çš„çˆ¸çˆ¸</span><span class="trad">mi papÃ¡</span></div>
<div class="word_or_phrase"><span class="pinyin"> wÇ’ de bÃ  ba shÃ¬ zhÅng wÃ©n lÇo shÄ« ã€‚ </span><span class="chino">æˆ‘çš„çˆ¸çˆ¸æ˜¯ä¸­æ–‡è€å¸ˆã€‚</span><span class="trad">mi papÃ¡ es profesor de chino.</span></div>
<div class="word_or_phrase"><span class="pinyin"> xÇ huan </span><span class="chino">å–œæ¬¢</span><span class="trad">gustar</span></div>
<div class="word_or_phrase"><span class="pinyin"> zhÃ¨ shÃ¬ wÇ’ de Ã©r zi </span><span class="chino">è¿™æ˜¯æˆ‘çš„å„¿å­</span><span class="trad">este es mi hijo</span></div>
<div class="word_or_phrase"><span class="pinyin"> lÇo gong </span><span class="chino">è€å…¬</span><span class="trad">marido</span></div>
<div class="word_or_phrase"><span class="pinyin"> lÇo pÃ³ </span><span class="chino">è€å©†</span><span class="trad">esposa</span></div>
<div class="word_or_phrase"><span class="pinyin"> wÇ’ de Ã©r zi shÃ¬ lÇœ shÄ« ã€‚ </span><span class="chino">æˆ‘çš„å„¿å­æ˜¯å¾‹å¸ˆã€‚</span><span class="trad">mi hijo es abogado.</span></div>
<div class="word_or_phrase"><span class="pinyin"> nÇ de mÄ ma </span><span class="chino">ä½ çš„å¦ˆå¦ˆ</span><span class="trad">tu madre</span></div>
<div class="word_or_phrase"><span class="pinyin"> tÄ shÃ¬ yÄ«ng guÃ³ rÃ©n ã€‚ tÄ shuÅ yÄ«ng wÃ©n ã€‚ </span><span class="chino">å¥¹æ˜¯è‹±å›½äººã€‚å¥¹è¯´è‹±æ–‡ã€‚</span><span class="trad">ella es britÃ¡nica. ella habla inglÃ©s.</span></div>
<div class="word_or_phrase"><span class="pinyin"> shuÅ </span><span class="chino">è¯´</span><span class="trad">explicar</span></div>
<div class="word_or_phrase"><span class="pinyin"> wÇ’ de bÃ  ba shÃ¬ yÄ« shÄ“ng ã€‚ </span><span class="chino">æˆ‘çš„çˆ¸çˆ¸æ˜¯åŒ»ç”Ÿã€‚</span><span class="trad">mi papÃ¡ es mÃ©dico.</span></div>
<div class="word_or_phrase"><span class="pinyin"> duÃ¬ bÃ¹ duÃ¬ </span><span class="chino">å¯¹ä¸å¯¹</span><span class="trad">Â¿es correcto o incorrecto?</span></div>
<div class="word_or_phrase"><span class="pinyin"> tÄ de lÇo gong shÃ¬ mÄ›i guÃ³ rÃ©n ã€‚ </span><span class="chino">å¥¹çš„è€å…¬æ˜¯ç¾å›½äººã€‚</span><span class="trad">su marido es estadounidense.</span></div>
<div class="word_or_phrase"><span class="pinyin"> kÃ¨ </span><span class="chino">è¯¾</span><span class="trad">clase</span></div>
<div class="word_or_phrase"><span class="pinyin"> yÄ«n yuÃ¨ </span><span class="chino">éŸ³ä¹</span><span class="trad">mÃºsica</span></div>
<div class="word_or_phrase"><span class="pinyin"> zhÃ¨ shÃ¬ tÄ de lÇo gong ï¼Œ duÃ¬ bÃ¹ duÃ¬ ï¼Ÿ </span><span class="chino">è¿™æ˜¯å¥¹çš„è€å…¬ï¼Œå¯¹ä¸å¯¹ï¼Ÿ</span><span class="trad">Ã©ste es su marido, Â¿no?</span></div>
<div class="word_or_phrase"><span class="pinyin"> duÃ¬ ï¼ </span><span class="chino">å¯¹ï¼</span><span class="trad">Â¡bien!</span></div>
<div class="word_or_phrase"><span class="pinyin"> tÄ de bÃ  ba shÃ¬ yÄ«ng guÃ³ rÃ©n ã€‚ </span><span class="chino">å¥¹çš„çˆ¸çˆ¸æ˜¯è‹±å›½äººã€‚</span><span class="trad">su padre es britÃ¡nico.</span></div>
<div class="word_or_phrase"><span class="pinyin"> tÄ de lÇo pÃ³ shÃ¬ yÄ«ng guÃ³ rÃ©n ã€‚ </span><span class="chino">ä»–çš„è€å©†æ˜¯è‹±å›½äººã€‚</span><span class="trad">su esposa es britÃ¡nica.</span></div>
<div class="word_or_phrase"><span class="pinyin"> jiÄ nÃ¡ dÃ  </span><span class="chino">åŠ æ‹¿å¤§</span><span class="trad">canadÃ¡</span></div>
<div class="word_or_phrase"><span class="pinyin"> tÄ de mÄ ma shÃ¬ yÄ« shÄ“ng ma ï¼Ÿ </span><span class="chino">ä»–çš„å¦ˆå¦ˆæ˜¯åŒ»ç”Ÿå—ï¼Ÿ</span><span class="trad">Â¿su madre es doctora?</span></div>
<div class="word_or_phrase"><span class="pinyin"> lÇœ shÄ« </span><span class="chino">å¾‹å¸ˆ</span><span class="trad">abogado</span></div>
<div class="word_or_phrase"><span class="pinyin"> tÄ de lÇo pÃ³ shÃ¬ lÇœ shÄ« ma ï¼Ÿ </span><span class="chino">ä»–çš„è€å©†æ˜¯å¾‹å¸ˆå—ï¼Ÿ</span><span class="trad">Â¿su esposa es abogada?</span></div>
<div class="word_or_phrase"><span class="pinyin"> nÇš Ã©r </span><span class="chino">å¥³å„¿</span><span class="trad">hija</span></div>
<div class="word_or_phrase"><span class="pinyin"> tÄ de bÃ  ba shÃ¬ jiÄ nÃ¡ dÃ  rÃ©n ma ï¼Ÿ </span><span class="chino">ä»–çš„çˆ¸çˆ¸æ˜¯åŠ æ‹¿å¤§äººå—ï¼Ÿ</span><span class="trad">Â¿su padre es canadiense?</span></div>
<div class="word_or_phrase"><span class="pinyin"> wÇ’ de nÇš Ã©r shÃ¬ lÇo shÄ« ã€‚ </span><span class="chino">æˆ‘çš„å¥³å„¿æ˜¯è€å¸ˆã€‚</span><span class="trad">mi hija es maestra.</span></div>
<div class="word_or_phrase"><span class="pinyin"> zhÅng xuÃ© shÄ“ng </span><span class="chino">ä¸­å­¦ç”Ÿ</span><span class="trad">estudiante de secundaria</span></div>
<div class="word_or_phrase"><span class="pinyin"> duÃ¬ ï¼Œ wÇ’ de Ã©r zi shÃ¬ zhÅng xuÃ© shÄ“ng ã€‚ </span><span class="chino">å¯¹ï¼Œæˆ‘çš„å„¿å­æ˜¯ä¸­å­¦ç”Ÿã€‚</span><span class="trad">sÃ­, mi hijo es un estudiante de secundaria.</span></div>
<div class="word_or_phrase"><span class="pinyin"> nÇ de nÇš Ã©r shÃ¬ zhÅng xuÃ© shÄ“ng ma ï¼Ÿ </span><span class="chino">ä½ çš„å¥³å„¿æ˜¯ä¸­å­¦ç”Ÿå—ï¼Ÿ</span><span class="trad">Â¿tu hija es estudiante de secundaria?</span></div>
<div class="word_or_phrase"><span class="pinyin"> yÄ› </span><span class="chino">ä¹Ÿ</span><span class="trad">tambiÃ©n</span></div>
<div class="word_or_phrase"><span class="pinyin"> nÇ yÄ› shÃ¬ lÇo shÄ« ma ï¼Ÿ </span><span class="chino">ä½ ä¹Ÿæ˜¯è€å¸ˆå—ï¼Ÿ</span><span class="trad">Â¿eres profesor tambiÃ©n?</span></div>
<div class="word_or_phrase"><span class="pinyin"> zhÃ¨ shÃ¬ </span><span class="chino">è¿™æ˜¯</span><span class="trad">esto es</span></div>
<div class="word_or_phrase"><span class="pinyin"> wÇ’ de nÇš Ã©r yÄ› shÃ¬ yÄ« shÄ“ng ã€‚ </span><span class="chino">æˆ‘çš„å¥³å„¿ä¹Ÿæ˜¯åŒ»ç”Ÿã€‚</span><span class="trad">mi hija tambiÃ©n es mÃ©dico.</span></div>
<div class="word_or_phrase"><span class="pinyin"> zhÃ¨ shÃ¬ wÇ’ de Ã©r zi ã€‚ tÄ shÃ¬ xuÃ© sheng ã€‚ </span><span class="chino">è¿™æ˜¯æˆ‘çš„å„¿å­ã€‚ä»–æ˜¯å­¦ç”Ÿã€‚</span><span class="trad">este es mi hijo. Ã©l es un estudiante.</span></div>
<div class="word_or_phrase"><span class="pinyin"> duÃ¬ ï¼Œ zhÃ¨ shÃ¬ wÇ’ de bÃ  ba ã€‚ </span><span class="chino">å¯¹ï¼Œè¿™æ˜¯æˆ‘çš„çˆ¸çˆ¸ã€‚</span><span class="trad">sÃ­, este es mi papÃ¡.</span></div>
<div class="word_or_phrase"><span class="pinyin"> wÇ’ de Ã©r zi shÃ¬ dÃ  xuÃ© shÄ“ng ã€‚ </span><span class="chino">æˆ‘çš„å„¿å­æ˜¯å¤§å­¦ç”Ÿã€‚</span><span class="trad">mi hijo es un estudiante universitario.</span></div>
<div class="word_or_phrase"><span class="pinyin"> tÄ de lÇo gong shÃ¬ yÄ«ng guÃ³ rÃ©n ã€‚ </span><span class="chino">å¥¹çš„è€å…¬æ˜¯è‹±å›½äººã€‚</span><span class="trad">su marido es britÃ¡nico.</span></div>
<div class="word_or_phrase"><span class="pinyin"> nÇ shÃ¬ hÃ¡n guÃ³ rÃ©n ma ï¼Ÿ </span><span class="chino">ä½ æ˜¯éŸ©å›½äººå—ï¼Ÿ</span><span class="trad">Â¿eres coreano?</span></div>
<div class="word_or_phrase"><span class="pinyin"> zhÃ¨ shÃ¬ nÇ de mÄ ma ï¼Œ duÃ¬ bÃ¹ duÃ¬ ï¼Ÿ </span><span class="chino">è¿™æ˜¯ä½ çš„å¦ˆå¦ˆï¼Œå¯¹ä¸å¯¹</span><span class="trad">Ã©sta es tu madre, Â¿no?</span></div>
    <!-- END VOCABULARIO-->

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const entries = document.querySelectorAll(".word_or_phrase");

        function getChineseText(word_or_phrase) {
          return word_or_phrase.querySelector(".chino").innerText.trim();
        }

        function speakChinese(text) {
          const utter = new SpeechSynthesisUtterance(text);

          // Velocidad al 75%
          utter.rate = 0.75;

          // Forzar idioma chino mandarÃ­n
          utter.lang = "zh-CN";

          // Buscar voz china (si el sistema tiene instalada)
          const voices = speechSynthesis.getVoices();
          const chineseVoice = voices.find((v) => v.lang.startsWith("zh"));

          if (chineseVoice) {
            utter.voice = chineseVoice;
          }

          speechSynthesis.cancel(); // detener cualquier lectura anterior
          speechSynthesis.speak(utter);
        }

        // Como las voces pueden tardar en cargarse
        window.speechSynthesis.onvoiceschanged = () => {};

        entries.forEach((word_or_phrase) => {
          word_or_phrase.style.cursor = "pointer";
          word_or_phrase.addEventListener("click", () => {
            const chinese = getChineseText(word_or_phrase);
            speakChinese(chinese);
          });
        });
      });
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // --- tu cÃ³digo original aquÃ­ --- //

        const sinsun = document.getElementById("sinsun");
        let fontState = 0; // 0 = sistema, 1 = rounded1, 2 = rounded2

        sinsun.addEventListener("click", (e) => {
          e.preventDefault();

          const chinos = document.querySelectorAll(".chino");

          fontState = (fontState + 1) % 3; // ciclo 0 â†’ 1 â†’ 2 â†’ 0

          chinos.forEach((el) => {
            // primero limpiamos todas las fuentes anteriores
            el.classList.remove("rounded1", "rounded2");

            // aplicamos segÃºn el estado
            if (fontState === 1) {
              el.classList.add("rounded1");
            } else if (fontState === 2) {
              el.classList.add("rounded2");
            }
            // si fontState === 0 â†’ queda sin clase â†’ fuente â€œcuadradaâ€ original
          });
        });
      });
    </script>

    <script>
      mandarinspot.annotate(".chino");
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const toggleBtn = document.getElementById("spotOnOff");
        let spotActive = false; // ğŸ”´ Estado inicial: DESACTIVADO

        // --- Al cargar la pÃ¡gina, asegurarnos de que NO haya anotaciones ---
        document
          .querySelectorAll(".mandarinspot_annotation")
          .forEach((el) => el.remove());
        document
          .querySelectorAll(".mandarinspot_tooltip")
          .forEach((el) => el.remove());
        document.querySelectorAll(".chino").forEach((el) => {
          el.innerHTML = el.textContent; // limpia el HTML
        });

        toggleBtn.addEventListener("click", (e) => {
          e.preventDefault(); // evitar navegaciÃ³n

          if (!spotActive) {
            // --- ACTIVAR MANDARIN SPOT ---
            mandarinspot.annotate(".chino", {
              phonetic: "pinyin",
              inline: false,
            });
            spotActive = true;
          } else {
            // --- DESACTIVAR MANDARIN SPOT ---
            document
              .querySelectorAll(".mandarinspot_annotation")
              .forEach((el) => el.remove());
            document
              .querySelectorAll(".mandarinspot_tooltip")
              .forEach((el) => el.remove());
            document.querySelectorAll(".chino").forEach((el) => {
              el.innerHTML = el.textContent; // restaura solo el texto
            });
            spotActive = false;
          }
        });
      });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        function getChineseVoices() {
          let voices = speechSynthesis
            .getVoices()
            .filter((v) => v.lang.startsWith("zh"));

          let male = null;
          let female = null;

          male = voices.find((v) =>
            /(male|bo|nan|cmn-hans-cn|deepmind.*male)/i.test(v.name)
          );
          female = voices.find((v) =>
            /(female|nv|woman|girl|cmn-Hans-CN|deepmind.*female)/i.test(v.name)
          );

          if (!male) male = voices.find((v) => v.pitch < 1.0);
          if (!female) female = voices.find((v) => v.pitch >= 1.0);

          if (!male) male = voices[0] || null;
          if (!female) female = voices[1] || male;

          return { male, female };
        }

        function speak(text, voice, callback = null) {
          const u = new SpeechSynthesisUtterance(text);
          u.lang = "zh-CN";
          u.rate = 0.75;
          if (voice) u.voice = voice;
          if (callback) u.onend = callback;
          speechSynthesis.speak(u);
        }

        const buttons = document.querySelectorAll(".speakDialog");

        buttons.forEach((button) => {
          button.addEventListener("click", () => {
            const qaBox = button.closest(".Q_and_A"); // tarjeta asociada
            const phrases = qaBox.querySelectorAll(".chino"); // solo de esta tarjeta

            if (!phrases.length) return;

            const { male, female } = getChineseVoices();

            let index = 0;

            function readNext() {
              if (index >= phrases.length) return;

              const text = phrases[index].innerText.trim();
              const voice = index % 2 === 0 ? female : male; // alterna

              speak(text, voice, () => {
                index++;
                readNext();
              });
            }

            readNext(); // iniciar lectura secuencial
          });
        });

        window.speechSynthesis.onvoiceschanged = () => {};
      });
    </script>
  </body>
</html>
